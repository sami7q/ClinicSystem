{"openapi":"3.1.0","info":{"title":"ClinicSystem API","description":"A backend API for managing clinic data including patients, doctors, appointments, invoices, and users.","version":"0.4.0"},"paths":{"/patients":{"post":{"tags":["Patients"],"summary":"Create Patient Api","operationId":"create_patient_api_patients_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Patients"],"summary":"List Patients Api","operationId":"list_patients_api_patients_get","parameters":[{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Q"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PatientOut"},"title":"Response List Patients Api Patients Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/patients/{patient_id}":{"get":{"tags":["Patients"],"summary":"Get Patient Api","operationId":"get_patient_api_patients__patient_id__get","parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"integer","title":"Patient Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Patients"],"summary":"Update Patient Api","operationId":"update_patient_api_patients__patient_id__put","parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"integer","title":"Patient Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatientOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Patients"],"summary":"Delete Patient Api","operationId":"delete_patient_api_patients__patient_id__delete","parameters":[{"name":"patient_id","in":"path","required":true,"schema":{"type":"integer","title":"Patient Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/doctors/":{"get":{"tags":["Doctors"],"summary":"List Doctors","operationId":"list_doctors_doctors__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DoctorOut"},"type":"array","title":"Response List Doctors Doctors  Get"}}}}}},"post":{"tags":["Doctors"],"summary":"Add Doctor","operationId":"add_doctor_doctors__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/doctors/{doctor_id}":{"get":{"tags":["Doctors"],"summary":"Get Doctor","operationId":"get_doctor_doctors__doctor_id__get","parameters":[{"name":"doctor_id","in":"path","required":true,"schema":{"type":"integer","title":"Doctor Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Doctors"],"summary":"Modify Doctor","operationId":"modify_doctor_doctors__doctor_id__put","parameters":[{"name":"doctor_id","in":"path","required":true,"schema":{"type":"integer","title":"Doctor Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DoctorOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Doctors"],"summary":"Remove Doctor","operationId":"remove_doctor_doctors__doctor_id__delete","parameters":[{"name":"doctor_id","in":"path","required":true,"schema":{"type":"integer","title":"Doctor Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/appointments/":{"get":{"tags":["Appointments"],"summary":"Get All Appointments","operationId":"get_all_appointments_appointments__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AppointmentOut"},"type":"array","title":"Response Get All Appointments Appointments  Get"}}}}}},"post":{"tags":["Appointments"],"summary":"Add Appointment","operationId":"add_appointment_appointments__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/appointments/{appointment_id}":{"put":{"tags":["Appointments"],"summary":"Update Status","operationId":"update_status_appointments__appointment_id__put","parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"integer","title":"Appointment Id"}},{"name":"status_value","in":"query","required":true,"schema":{"type":"string","title":"Status Value"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Appointments"],"summary":"Remove Appointment","operationId":"remove_appointment_appointments__appointment_id__delete","parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"integer","title":"Appointment Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invoices/":{"get":{"tags":["Invoices"],"summary":"Get All Invoices","operationId":"get_all_invoices_invoices__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/InvoiceOut"},"type":"array","title":"Response Get All Invoices Invoices  Get"}}}}}},"post":{"tags":["Invoices"],"summary":"Add Invoice","operationId":"add_invoice_invoices__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/invoices/{invoice_id}":{"get":{"tags":["Invoices"],"summary":"Get Invoice","operationId":"get_invoice_invoices__invoice_id__get","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Invoices"],"summary":"Edit Invoice","operationId":"edit_invoice_invoices__invoice_id__put","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Invoices"],"summary":"Remove Invoice","operationId":"remove_invoice_invoices__invoice_id__delete","parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"integer","title":"Invoice Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/":{"post":{"tags":["Users"],"summary":"Add User","description":"إنشاء مستخدم جديد — يمكن فقط للمدير (admin) تنفيذ هذه العملية.","operationId":"add_user_users__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/{username}":{"get":{"tags":["Users"],"summary":"Get User","description":"عرض بيانات مستخدم محدد — متاح لأي مستخدم مسجل دخول.","operationId":"get_user_users__username__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/login":{"post":{"tags":["Users"],"summary":"Login","description":"تسجيل الدخول باستخدام username + password.\nيعيد JWT Token صالح لمدة 24 ساعة.","operationId":"login_users_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_users_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["Health"],"summary":"Health","operationId":"health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AppointmentCreate":{"properties":{"patient_id":{"type":"integer","title":"Patient Id"},"doctor_id":{"type":"integer","title":"Doctor Id"},"date":{"type":"string","format":"date-time","title":"Date"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"status":{"type":"string","enum":["scheduled","done","cancelled"],"title":"Status","default":"scheduled"}},"type":"object","required":["patient_id","doctor_id","date"],"title":"AppointmentCreate"},"AppointmentOut":{"properties":{"patient_id":{"type":"integer","title":"Patient Id"},"doctor_id":{"type":"integer","title":"Doctor Id"},"date":{"type":"string","format":"date-time","title":"Date"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"status":{"type":"string","enum":["scheduled","done","cancelled"],"title":"Status","default":"scheduled"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["patient_id","doctor_id","date","id","created_at"],"title":"AppointmentOut"},"Body_login_users_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_users_login_post"},"DoctorCreate":{"properties":{"name":{"type":"string","title":"Name"},"specialty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"}},"type":"object","required":["name"],"title":"DoctorCreate"},"DoctorOut":{"properties":{"name":{"type":"string","title":"Name"},"specialty":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Specialty"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","id","created_at"],"title":"DoctorOut"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InvoiceCreate":{"properties":{"appointment_id":{"type":"integer","title":"Appointment Id"},"amount":{"type":"number","title":"Amount"},"payment_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Method"}},"type":"object","required":["appointment_id","amount"],"title":"InvoiceCreate"},"InvoiceOut":{"properties":{"appointment_id":{"type":"integer","title":"Appointment Id"},"amount":{"type":"number","title":"Amount"},"payment_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Method"},"id":{"type":"integer","title":"Id"},"issued_at":{"type":"string","format":"date-time","title":"Issued At"}},"type":"object","required":["appointment_id","amount","id","issued_at"],"title":"InvoiceOut"},"PatientCreate":{"properties":{"name":{"type":"string","title":"Name"},"age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["name"],"title":"PatientCreate"},"PatientOut":{"properties":{"name":{"type":"string","title":"Name"},"age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","id","created_at"],"title":"PatientOut"},"UserCreate":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","maxLength":72,"minLength":6,"title":"Password"},"role":{"type":"string","enum":["admin","doctor","receptionist"],"title":"Role","default":"admin"}},"type":"object","required":["username","password"],"title":"UserCreate"},"UserOut":{"properties":{"username":{"type":"string","title":"Username"},"id":{"type":"integer","title":"Id"},"role":{"type":"string","title":"Role"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["username","id","role","created_at"],"title":"UserOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/users/login"}}}}}}